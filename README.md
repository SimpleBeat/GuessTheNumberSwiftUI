# GuessTheNumberSwiftUI

Игра **Угадай Число** выполненная в *SwiftUI* для тестового задания проекта *Нетология*.

## Общее описание тестового задания
Тестовое задание заключается в том, чтобы выбрать одну из тем курса iOS разработчика, написать тестовый код (100-300 строк), и приложить комментарии к нему. Мной была выбрана тема *SwiftUI*, разработана простая игровая программа, комментарии к которой можно увидеть ниже.

## Комментарии к игре **Угадай Число**
Игра состоит из одного экрана, что облегчает восприятие и обучение студентов, поскольку не несет дополнительной нагрузки в виде продвинутых техник (переход с экрана на экран, передача данных между экранами, организация всплывающих окон, и т.д.), а также иллюстрирует возможности дальнейшего улучшения (рефакторинга, дополнительных игровых механик).

В программе использованы базовые техники разработки *SwiftUI*, и нарочно повторяющиеся элементы (кнопки, однотипные действия). Это сделано специально с двоякой целью: пока студенты повторяют и перепечатывают текст программы, у них откладывается в памяти структура и синтаксис элемента; также, возникает естественное желание узнать как можно не повторять один и тот же код несколько раз, т.е. возникает базовое понимание для чего нужен рефакторинг и как он проводится. Прошу рассматривать код программы учитывая эти специальные 'несовершенства'.

В данной репозитории представлен код в виде проекта XCode. Непосредственно файл кода игры [можно найти тут](https://github.com/SimpleBeat/GuessTheNumberSwiftUI/blob/main/GuessTheNumber/GuessTheNumber/ContentView.swift).

---

Игра **Угадай Число** очень проста: компьютер случайным образом 'загадывает' число от 0 до 99 включительно и дает игроку некоторое количество попыток отгадать это число. Каждый раз когда игрок вводит свое число-предположение, компьютер либо дает подсказку (больше или меньше число игрока чем загаданное число), либо сообщает о победе (если игроку повезло угадать число), либо сообщает о проигрыше (если попытки закончилось). В любом случае, выиграл игрок или проиграл, компьютер выбирает новое число и предлагает сыграть еще раз. В силу своей простоты игра умещается на одном экране и выглядит следующим образом: 

![](https://github.com/SimpleBeat/GuessTheNumberSwiftUI/blob/main/screenGeneral.png)

### Главный экран
На главном экране располагаются:
 - Название игры (элемент `Text()` и его базовые аттрибуты)
 - Краткое описание (элемент `Text()` и дополнительные аттрибуты, такие как цвет фона; здесь также можно проиллюстрировать как порядок аттрибутов влияет на отображение элемента)
 - Игровое поле (остальные элементы, которые структурно сгруппированы в отдельный вид - `GameField: View` - что позволяет рассказать студентам об иерархии программы в *SwiftUI*)

*Код игры прокомментирован, и позволяет проследить структуру визуально в редакторе XCode*.

### Игровое поле
Игровое поле (`GameField`) визуально состоит из следующих элементов:
 - Вводный (дополнительный) текст красного цвета, который появляется на экране только в начале игры (это позволяет рассказать студентам о том как устроено условное отображение элементов на экране)
 - Подсказка с количеством оставшихся попыток (когда остается 1 попытка текст меняет цвет на красный, что позволяет рассказать студентам о том как организавано условное применение аттрибутов элемента)
 - Подсказка с диапазоном возможных чисел (минимум и максимум диапазона меняются с каждой новой попыткой игрока угадать число)
 - Подсказка больше или меньше число-предположение игрока чем загаданное число
 - Табло, которое состоит из двух разрядов (число десятков и число единиц) и которое обновляется в зависимости от того какую кнопку нажал игрок (табло оформлено как `HStack()` и позволяет исследовать варианты ввода данных в программах)
 - Блок цифровых кнопок, кнопки 'X' (сброс, изображение крестика в круге), и кнопки 'ввод' (изображение галочки в круге) выполненные элементами `Button()`

### Блок кнопок
Блок кнопок состоит из:
 - Цифровых кнопок; каждый раз когда игрок нажимает на кнопку с изображением цифры, табло обновляется (цифры разрядов сдвигаются влево)
 - Кнопка 'X'; когда игрок нажимает на эту кнопку разряды на табло сбрасываются на 0
 - Кнопка 'ввод' (изображение галочки в круге); когда игрок нажимает на эту кнопку задействуется логика игры (см. ниже)

Кнопки - повторяющиеся элементы, которые позволяют не только запомнить как структурно организованы эти элементы в *SwiftUI*, но также какие могут быть варианты отображения кнопок (фон, текст, цвет, изображения, встроенные иконки, и т.д.). Также студенты не смогут не заметить, что бОльшая часть кода кнопок - это повтор одного и того же кода с небольшими изменениями, что способствует органичному переходу к теме техник рефакторинга в *SwiftUI*. Поскольку рефакторинг - отдельная тема, то ее можно оставить на следующее занятие или как домашенее задание.

### Логика игры
Когда игрок нажимает на кнопку 'ввод', программа задействует игровую логику. Эта логика состоит из нескольких шагов в следующей последовательности:
 - вычисляется число-предположение игрока (цифра из регистра десятков умножается на 10 и к ней прибавляется цифра из регистра единиц)
 - догадка игрока сравнивается с числом которое выбрал компьютер
 - если *число меньше*, то компьютер отображает подсказку что число игрока меньше, обновляет минимум диапазона, а также уменьшает количество оставшихся попыток на 1
 - если *число больше*, то компьютер отображает подсказку что число игрока больше, обновляет максимум диапазона, а также уменьшает количество оставшихся попыток на 1
 - если *число совпадает* с числом компьютера, то это победа игрока! Компьютер показывает поздравительное сообщение, предлагает сыграть еще раз, загадывает новое число, сбрасывает количество попыток, диапазон, и временно отображает угаданное число
 - если количество попыток стало меньше 1 (т.е. попытки кончились), то игрок проиграл. Компьютер показывает соответствующее сообщение, предлагает сыграть еще раз загадывает новое число, сбрасывает количество попыток, диапазон, и временно показывает какое число не угадал игрок

Вышеприведенный игровой цикл повторяется пока игрок не выйдет из программы.

Простота, наглядность и неоптимизированность кода позволяет обсудить со студентами варианты улучшения, рефакторинга, реструктуризации игрового цикла, введения дополнительного функционала и удобства управления игрой, что может стать домашним заданием или превращением проекта в полноценную курсовую/дипломную работу.

### Переменные
В игре использованы следующие переменные для хранения данных и управления логикой:
 - `maxAttempts: Int` - сколько у игрока попыток отгадать число (можно менять от 1 до 8)
 - `currentAttempt: Int` - сколько у игрока осталось попыток отгадать число (сначала равно `maxAttempts` потом постепенно уменьшается)
 - `digit10: Int` - разряд десятков на табло
 - `digit1: Int` - разряд единиц на табло
 - `min: Int` - минимум диапазона в котором находится загаданное компьютером число
 - `max: Int` - максимум диапазона в котором находится загаданное компьютером число
 - `attemptNames: [String]` - массив с числом попыток выраженными словами 
 - `hint: String` - подсказка (больше или меньше число-предположение игрока)
 - `number: Int` - выбранное случайным образом число от 0 до 99 включительно
 - `newGameHint: String` - дополнительный текст (отображается в начале игры)
 - `guessNumber: Int` - число-предположение игрока (вычисляется из цифр на табло)

### Рекомендации по использованию кода игры в учебных целях
Код игры достаточно прост и может быть написан прямо во время проведения занятия. Например, преподаватель может писать код, останавливаясь и показывая как программа отображается в эмуляторе, как изменения в коде влияют на внешние изменения, и объясняя каким образом добиться того или иного визуального оформления элемента. Студенты могут набирать код, повторяя за преподавателем, и если возникают какие-либо вопросы - получать ответы на них в ходе занятия. На написание и краткое объяснение кода преподавателем должно уйти примерно 45-60 минут, остальное время можно посвятить улучшениям и расширению функционала игры. Также можно затронуть темы `class` и `struct`, особенности каждой из этих структур, почему для *SwiftUI* больше подходит `struct` и когда можно (и нужно) использовать `class`. 

Возможные улучшения:
 - рефакторинг кода цифровых кнопок, реорганизация в элементы `GridItem()`
 - вынесение повторяющегося кода в отдельные функции
 - отделение логики игры от ее визуального представления
 - добавление всплывающих окон и экранов с сообщением о выигранной/проигранной игре
 - улучшения игрового интерфейса (визуальное представление диапазона возможных чисел, ввод числа-предположения с помощью других элементов *SwiftUI*, и т.д.)
 - добавление/сохранение данных о количестве выигранных/проигранных игр
 - добавление настроек сложности игры (количество попыток)
 - аудио/визуальное насыщение (звуки, музыка, простая анимация)
